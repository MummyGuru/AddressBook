<Window x:Class="AddressBook.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ÐÐ´Ñ€ÐµÑÐ½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°" Height="600" Width="1000"
        Background="#F5F5F5">
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="ðŸ“‡ ÐÐ´Ñ€ÐµÑÐ½Ð°Ñ ÐºÐ½Ð¸Ð³Ð°" FontSize="24" FontWeight="Bold" Margin="0,0,0,15"/>

        <Border Grid.Row="1" Background="White" Padding="10" CornerRadius="5" Margin="0,0,0,15">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Orientation="Horizontal">
                    <TextBox Text="{Binding SearchQuery, UpdateSourceTrigger=PropertyChanged}" Width="250" Margin="0,10,10,0"/>
                    <ComboBox ItemsSource="{Binding Categories}" SelectedItem="{Binding SelectedCategory}" Width="80" Margin="0,10,15,0"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button Content="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ" Command="{Binding AddCommand}"/>
                    <Button Content="âœï¸ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ" Command="{Binding EditCommand}"/>
                    <Button Content="ðŸ—‘ï¸ Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ" Command="{Binding DeleteCommand}" Background="#DC4900"/>
                </StackPanel>

                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button Content="ðŸ’¾ Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ" Command="{Binding SaveCommand}" Background="#28A745"/>
                    <Button Content="ðŸ“‚ Ð—Ð°Ð³Ñ€ÑƒÐ·Ð¸Ñ‚ÑŒ" Command="{Binding LoadCommand}" Background="#FFA500"/>
                    <Button Content="ðŸ“¤ Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ CSV" Command="{Binding ExportCommand}" Background="#17A2B8"/>
                </StackPanel>
            </Grid>
        </Border>

        <Border Grid.Row="2" Background="White" Padding="10" CornerRadius="5">
            <DataGrid ItemsSource="{Binding ContactsView}" SelectedItem="{Binding SelectedContact}"
                      AutoGenerateColumns="False" IsReadOnly="True" SelectionMode="Single"
                      RowHeight="60">
                <DataGrid.Columns>
                    <!-- Ð¤Ð¾Ñ‚Ð¾ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð° -->
                    <DataGridTemplateColumn Header="Ð¤Ð¾Ñ‚Ð¾" Width="70">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Image Source="{Binding PhotoPath, Converter={StaticResource StringToImageSourceConverter}}" 
                                       Width="50" Height="50" 
                                       Stretch="UniformToFill" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center">
                                    <Image.Style>
                                        <Style TargetType="Image">
                                            <Setter Property="Visibility" Value="Visible"/>
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding PhotoPath}" Value="">
                                                    <Setter Property="Visibility" Value="Hidden"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Image.Style>
                                </Image>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>                  
                    <DataGridTextColumn Header="Ð˜Ð¼Ñ" Binding="{Binding FirstName}" Width="120"/>
                    <DataGridTextColumn Header="Ð¤Ð°Ð¼Ð¸Ð»Ð¸Ñ" Binding="{Binding LastName}" Width="120"/>
                    <DataGridTextColumn Header="Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½" Binding="{Binding Phone}" Width="130"/>
                    <DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="180"/>
                    <DataGridTextColumn Header="ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ" Binding="{Binding Category}" Width="100"/>
                    <DataGridTemplateColumn Header="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ" Width="80">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Ellipse Width="15" Height="15" Fill="{Binding IsActive, Converter={StaticResource BoolToColorConverter}}"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>

        <Border Grid.Row="3" Background="#007ACC" Padding="10" CornerRadius="5" Margin="0,15,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="{Binding Contacts.Count, StringFormat='ðŸ“Š Ð’ÑÐµÐ³Ð¾ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð²: {0}'}" Foreground="White" FontWeight="Bold"/>
                <TextBlock Grid.Column="1" Text="{Binding ContactsView.Count, StringFormat='ðŸ” ÐžÑ‚Ð¾Ð±Ñ€Ð°Ð¶Ð°ÐµÑ‚ÑÑ: {0}'}" Foreground="White"/>
            </Grid>
        </Border>
    </Grid>
</Window>